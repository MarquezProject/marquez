[
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "4d3b8069-69b6-4708-ade0-3275112c9f04",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_menus",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO menus (id, name, restaurant_id, description)\n SELECT id, name, restaurant_id, description\n   FROM tmp_menus;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly added restaurant menus daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.menus",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for menus."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "tags": [],
                "description": "The unique ID of the menu."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "tags": [],
                "description": "The name of the menu."
              },
              {
                "name": "restaurant_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the restaurant related to the menu."
              },
              {
                "name": "description",
                "type": "TEXT",
                "tags": [],
                "description": "The description of the menu."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:45:52.000Z",
    "run": {
      "runId": "4d3b8069-69b6-4708-ade0-3275112c9f04"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_menus"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "6f0c13a5-f29b-46a5-90c1-0ffbebbbd1aa",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_categories",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO categories (id, name, menu_id, description)\n SELECT id, name, menu_id, description\n   FROM tmp_categories;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly added menus categories daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.categories",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for categories."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "description": "The unique ID of the category."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "description": "The name of the category."
              },
              {
                "name": "menu_id",
                "type": "INTEGER",
                "description": "The ID of the menu related to the category."
              },
              {
                "name": "description",
                "type": "TEXT",
                "description": "The description of the category."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:52.000Z",
    "run": {
      "runId": "6f0c13a5-f29b-46a5-90c1-0ffbebbbd1aa"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_categories"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "e05901b1-3a06-4b98-8d9c-aaf188c9a28c",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_menu_items",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO menu_items (id, name, price, category_id, description)\n SELECT id, name, price, category_id, description\n   FROM tmp_menu_items;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly added restaurant menu items daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.menu_items",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for menu items."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "description": "The ID of the menu item."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "description": "The name of the menu item."
              },
              {
                "name": "price",
                "type": "VARCHAR",
                "description": "The price of the menu item."
              },
              {
                "name": "category_id",
                "type": "VARCHAR",
                "description": "The ID of the category related to the item."
              },
              {
                "name": "description",
                "type": "TEXT",
                "description": "The description of the menu item."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:54.000Z",
    "run": {
      "runId": "e05901b1-3a06-4b98-8d9c-aaf188c9a28c"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_menu_items"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "a43a8523-349f-4296-807f-3354ac491990",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_orders",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO orders (id, placed_on, menu_item_id, quantity, discount_id, comment)\n SELECT id, placed_on, menu_item_id, quantity, discount_id, comment\n   FROM tmp_orders;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly placed orders daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.orders",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for orders."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "description": "The unique ID of the order."
              },
              {
                "name": "placed_on",
                "type": "TIMESTAMP",
                "description": "An ISO-8601 timestamp representing the date/time the order was placed."
              },
              {
                "name": "menu_item_id",
                "type": "INTEGER",
                "description": "The ID of the menu item related to the order."
              },
              {
                "name": "quantity",
                "type": "INTEGER",
                "description": "The number of the item in the order."
              },
              {
                "name": "discount_id",
                "type": "INTEGER",
                "description": "The unique ID of the discount applied to the order."
              },
              {
                "name": "comment",
                "type": "TEXT",
                "description": "The comment of the order."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:52.000Z",
    "run": {
      "runId": "a43a8523-349f-4296-807f-3354ac491990"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_orders"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "ffba2c14-4170-48da-bec3-ab5fd4ec9a3f",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_orders_7_days",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO orders_7_days (order_id, placed_on, discount_id, restaurant_id, menu_id, menu_item_id, category_id)\n SELECT o.id AS order_id, o.placed_on, o.discount_id, m.restaurant_id, m.id AS menu_id, mi.id AS menu_item_id, c.id AS category_id\n   FROM orders AS o\n  INNER JOIN menu_items AS mi\n     ON menu_items.id = o.menu_item_id\n  INNER JOIN categories AS c\n     ON c.id = mi.category_id\n  INNER JOIN menus AS m\n     ON m.id = c.menu_id\n  WHERE o.placed_on >= NOW() - interval '7 days';"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly placed orders weekly."
        }
      }
    },
    "inputs": [
      {
        "namespace": "food_delivery",
        "name": "public.menus"
      },
      {
        "namespace": "food_delivery",
        "name": "public.menu_items"
      },
      {
        "namespace": "food_delivery",
        "name": "public.orders"
      },
      {
        "namespace": "food_delivery",
        "name": "public.categories"
      }
    ],
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.orders_7_days",
        "facets": {
          "columnLineage": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json",
            "fields": {
              "order_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders",
                    "field": "id"
                  }
                ]
              },
              "placed_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders",
                    "field": "placed_on"
                  }
                ]
              },
              "discount_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders",
                    "field": "discount_id"
                  }
                ]
              },
              "restaurant_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.menus",
                    "field": "restaurant_id"
                  }
                ]
              },
              "menu_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.menus",
                    "field": "id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.categories",
                    "field": "menu_id"
                  }
                ]
              },
              "menu_item_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.menu_items",
                    "field": "id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders",
                    "field": "menu_item_id"
                  }
                ]
              },
              "category_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.categories",
                    "field": "id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.menu_items",
                    "field": "category_id"
                  }
                ]
              }
            }
          },
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for weekly orders."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "order_id",
                "type": "INTEGER",
                "description": "The ID of the order."
              },
              {
                "name": "placed_on",
                "type": "TIMESTAMP",
                "description": "An ISO-8601 timestamp representing the date/time the order was placed."
              },
              {
                "name": "discount_id",
                "type": "INTEGER",
                "description": "The ID of the discount applied to the order."
              },
              {
                "name": "restaurant_id",
                "type": "INTEGER",
                "description": "The ID of the restaurant related to the order."
              },
              {
                "name": "menu_id",
                "type": "INTEGER",
                "description": "The ID of the menu related to the order."
              },
              {
                "name": "menu_item_id",
                "type": "INTEGER",
                "description": "The ID of the menu item related to the order."
              },
              {
                "name": "category_id",
                "type": "INTEGER",
                "description": "The ID of category related to the order."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:02.000Z",
    "run": {
      "runId": "ffba2c14-4170-48da-bec3-ab5fd4ec9a3f"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_orders_7_days"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "182a9eaf-881a-4d49-860c-f7e260b8bf60",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_customers",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO customers (id, created_at, updated_at, name, email, phone, city_id)\n SELECT id, created_at, updated_at, name, email, phone, city_id\n   FROM tmp_customers;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly registered customers daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.customers",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for customers."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "description": "The unique ID of the customer."
              },
              {
                "name": "created_at",
                "type": "TIMESTAMP",
                "description": "An ISO-8601 timestamp representing the date/time the customer was created."
              },
              {
                "name": "updated_at",
                "type": "TIMESTAMP",
                "description": "An ISO-8601 timestamp representing the date/time the customer was updated."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "description": "The name of the customer."
              },
              {
                "name": "email",
                "type": "VARCHAR",
                "description": "The email address of the customer."
              },
              {
                "name": "address",
                "type": "VARCHAR",
                "description": "The address of the customer."
              },
              {
                "name": "phone",
                "type": "VARCHAR",
                "description": "The phone number of the customer."
              },
              {
                "name": "city_id",
                "type": "INTEGER",
                "description": "The ID of the city related to the customer."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:55.000Z",
    "run": {
      "runId": "182a9eaf-881a-4d49-860c-f7e260b8bf60"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_customers"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "b7098939-87f0-4207-878f-dfd8e8804d8a",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_order_status",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO order_status (id, transitioned_at, status, order_id, customer_id, restaurant_id, driver_id)\n SELECT id, transitioned_at, status, order_id, customer_id, restaurant_id, driver_id\n   FROM tmp_order_status;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads order statues updates daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.order_status",
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
          "description": "Loads order statues updates daily."
        },
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for order status."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "description": "The unique ID of the order status."
              },
              {
                "name": "transitioned_at",
                "type": "TIMESTAMP",
                "description": "An ISO-8601 timestamp representing the date/time the order status was transitioned."
              },
              {
                "name": "status",
                "type": "VARCHAR",
                "description": "The status of the order."
              },
              {
                "name": "order_id",
                "type": "INTEGER",
                "description": "The ID of the order related to the order status."
              },
              {
                "name": "customer_id",
                "type": "INTEGER",
                "description": "The ID of the customer related to the order status."
              },
              {
                "name": "restaurant_id",
                "type": "INTEGER",
                "description": "The ID of the restaurant related to the order status."
              },
              {
                "name": "driver_id",
                "type": "INTEGER",
                "description": "The ID of the driver related to the order status."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:52.000Z",
    "run": {
      "runId": "b7098939-87f0-4207-878f-dfd8e8804d8a"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_order_status"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "9f3db1c5-5e9a-4280-8184-18aca4592c77",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_drivers",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO drivers (id, created_at, updated_at, name, email, phone, car_make, car_model, car_year, car_color, car_license_plate)\n SELECT id, created_at, updated_at, name, email, phone, car_make, car_model, car_year, car_color, car_license_plate\n   FROM tmp_drivers;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly registered drivers daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.drivers",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for drivers."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "tags": [],
                "description": "The unique ID of the driver."
              },
              {
                "name": "created_at",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the driver was created."
              },
              {
                "name": "updated_at",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the driver was updated."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "tags": [],
                "description": "The name of the driver."
              },
              {
                "name": "email",
                "type": "VARCHAR",
                "tags": [],
                "description": "The email of the driver."
              },
              {
                "name": "phone",
                "type": "VARCHAR",
                "tags": [],
                "description": "The phone number of the driver."
              },
              {
                "name": "car_make",
                "type": "VARCHAR",
                "tags": [],
                "description": "The make of the car."
              },
              {
                "name": "car_model",
                "type": "VARCHAR",
                "tags": [],
                "description": "The model of the car."
              },
              {
                "name": "car_year",
                "type": "VARCHAR",
                "tags": [],
                "description": "The year of the car."
              },
              {
                "name": "car_color",
                "type": "VARCHAR",
                "tags": [],
                "description": "The color of the car."
              },
              {
                "name": "car_license_plate",
                "type": "VARCHAR",
                "tags": [],
                "description": "The license plate number of the car."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:52.000Z",
    "run": {
      "runId": "9f3db1c5-5e9a-4280-8184-18aca4592c77"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_drivers"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "8ddfb1d9-415f-4850-bcd6-01d02f011abe",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_restaurants",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO restaurants (id, created_at, updated_at, name, email, address, phone, city_id, business_hours_id, description)\n SELECT id, created_at, updated_at, name, email, address, phone, city_id, business_hours_id, description\n   FROM tmp_restaurants;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads newly registered restaurants daily."
        }
      }
    },
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.restaurants",
        "facets": {
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for restaurants."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "tags": [],
                "description": "The unique ID of the restaurant."
              },
              {
                "name": "created_at",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the restaurant was created."
              },
              {
                "name": "updated_at",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the restaurant was updated."
              },
              {
                "name": "name",
                "type": "VARCHAR",
                "tags": [],
                "description": "The name of the restaurant."
              },
              {
                "name": "email",
                "type": "VARCHAR",
                "tags": [],
                "description": "The email address of the restaurant."
              },
              {
                "name": "address",
                "type": "VARCHAR",
                "tags": [],
                "description": "The address of the restaurant."
              },
              {
                "name": "phone",
                "type": "VARCHAR",
                "tags": [],
                "description": "The phone number of the restaurant."
              },
              {
                "name": "city_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the city related to the restaurant."
              },
              {
                "name": "business_hours_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the business hours related to the restaurant."
              },
              {
                "name": "description",
                "type": "TEXT",
                "tags": [],
                "description": "The description of the restaurant."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:44:56.000Z",
    "run": {
      "runId": "8ddfb1d9-415f-4850-bcd6-01d02f011abe"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_restaurants"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "d5a2a4c4-fc78-428d-ae85-08c942ed8371",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_delivery_7_days",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO delivery_7_days (order_id, order_placed_on, order_dispatched_on, order_delivered_on, customer_email,\n      customer_address, discount_id, menu_id, restaurant_id, restaurant_address, menu_item_id, category_id, driver_id)\n  SELECT o.order_id, o.placed_on AS order_placed_on,\n    (SELECT transitioned_at FROM order_status WHERE order_id == o.order_id AND status = 'DISPATCHED') AS order_dispatched_on,\n    (SELECT transitioned_at FROM order_status WHERE order_id == o.order_id AND status = 'DELIVERED') AS order_delivered_on,\n    c.email AS customer_email, c.address AS customer_address, o.discount_id, o.menu_id, o.restaurant_id,\n      r.address, o.menu_item_id, o.category_id, d.id AS driver_id\n    FROM orders_7_days AS o\n   INNER JOIN order_status AS os\n      ON os.order_id = o.order_id\n   INNER JOIN customers AS c\n      ON c.id = os.customer_id\n   INNER JOIN restaurants AS r\n      ON r.id = os.restaurant_id\n   INNER JOIN drivers AS d\n      ON d.id = os.driver_id\n   WHERE os.transitioned_at >= NOW() - interval '7 days';"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Loads new deliveries for the week."
        }
      }
    },
    "inputs": [
      {
        "namespace": "food_delivery",
        "name": "public.orders_7_days"
      },
      {
        "namespace": "food_delivery",
        "name": "public.customers"
      },
      {
        "namespace": "food_delivery",
        "name": "public.order_status"
      },
      {
        "namespace": "food_delivery",
        "name": "public.drivers"
      },
      {
        "namespace": "food_delivery",
        "name": "public.restaurants"
      }
    ],
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.delivery_7_days",
        "facets": {
          "columnLineage": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json",
            "fields": {
              "order_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders_7_days",
                    "field": "order_id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.order_status",
                    "field": "order_id"
                  }
                ]
              },
              "order_placed_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders_7_days",
                    "field": "placed_on"
                  }
                ]
              },
              "order_dispatched_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.order_status",
                    "field": "transitioned_at"
                  }
                ]
              },
              "order_delivered_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.order_status",
                    "field": "transitioned_at"
                  }
                ]
              },
              "customer_email": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.customers",
                    "field": "email"
                  }
                ]
              },
              "customer_address": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.customers",
                    "field": "address"
                  }
                ]
              },
              "discount_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders_7_days",
                    "field": "discount_id"
                  }
                ]
              },
              "menu_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders_7_days",
                    "field": "menu_id"
                  }
                ]
              },
              "restaurant_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.orders_7_days",
                    "field": "restaurant_id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.restaurants",
                    "field": "id"
                  }
                ]
              },
              "restaurant_address": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.restaurants",
                    "field": "address"
                  }
                ]
              },
              "menu_item_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.restaurants",
                    "field": "menu_item_id"
                  }
                ]
              },
              "category_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.menu_item_id",
                    "field": "category_id"
                  }
                ]
              },
              "driver_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.drivers",
                    "field": "id"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.order_status",
                    "field": "driver_id"
                  }
                ]
              }
            }
          },
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for weekly deliveries."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "order_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the order."
              },
              {
                "name": "order_placed_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was placed."
              },
              {
                "name": "order_dispatched_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was dispatched."
              },
              {
                "name": "order_delivered_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was delivered."
              },
              {
                "name": "customer_email",
                "type": "VARCHAR",
                "tags": [],
                "description": "The email address of the customer."
              },
              {
                "name": "customer_address",
                "type": "VARCHAR",
                "tags": [],
                "description": "The physical address of the customer."
              },

              {
                "name": "menu_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the menu related to the order."
              },
              {
                "name": "restaurant_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the restaurant."
              },
              {
                "name": "restaurant_address",
                "type": "VARCHAR",
                "tags": [],
                "description": "The physical address of the restaurant."
              },
              {
                "name": "menu_item_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the menu item related to the order."
              },
              {
                "name": "category_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of category related to the order."
              },
              {
                "name": "discount_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the discount applied to the order"
              },
              {
                "name": "city_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the city related to the order."
              },
              {
                "name": "driver_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the driver related to the order."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          },
          "dataQualityAssertions": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DataQualityAssertionsDatasetFacet.json",
            "assertions": [
              {
                "assertion": "not_null",
                "success": false,
                "column": "driver_id"
              },
              {
                "assertion": "is_string",
                "success": true,
                "column": "customer_address"
              }
            ]
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:48:12.000Z",
    "run": {
      "runId": "d5a2a4c4-fc78-428d-ae85-08c942ed8371"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "etl_delivery_7_days"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "bd41a42a-bf18-4b74-9bb7-cd62637823d8",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "delivery_times_7_days",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO top_delivery_times (order_id, order_placed_on, order_delivered_on, order_delivery_time,\n      customer_email, restaurant_id, driver_id)\n  SELECT order_id, order_placed_on, order_delivered_on, DATEDIFF(minute, order_placed_on, order_delivered_on) AS order_delivery_time,\n    customer_email, restaurant_id, driver_id\n    FROM delivery_7_days\n   GROUP BY restaurant_id\n   ORDER BY order_delivery_time DESC\n   LIMIT 1;\nINSERT INTO discounts (amount_off, customer_email, starts_on, ends_on)\n  SELECT customer_email, DATEDIFF(minute, order_placed_on, order_delivered_on) AS order_delivery_time,\n    CASE WHEN order_delivery_time >= 60 THEN 15\n      ELSE 5\n    END AS amount_off,\n    NOW() AS starts_on,\n    NOW() + interval '7 days' AS ends_on\n   FROM top_delivery_times\n  WHERE order_delivery_time >= 45;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Determine weekly top delivery times by restaurant."
        }
      }
    },
    "inputs": [
      {
        "namespace": "food_delivery",
        "name": "public.delivery_7_days"
      }
    ],
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.top_delivery_times",
        "facets": {
          "columnLineage": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json",
            "fields": {
              "order_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_id"
                  }
                ]
              },
              "order_placed_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_placed_on"
                  }
                ]
              },
              "order_delivered_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_delivered_on"
                  }
                ]
              },
              "order_delivery_time": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_placed_on"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_delivered_on"
                  }
                ]
              },
              "customer_email": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "customer_email"
                  }
                ]
              },
              "restaurant_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "restaurant_id"
                  }
                ]
              },
              "driver_id": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "driver_id"
                  }
                ]
              }
            }
          },
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for top delivery times."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "order_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the order."
              },
              {
                "name": "order_placed_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was placed."
              },
              {
                "name": "order_delivered_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was delivered."
              },
              {
                "name": "order_delivery_time",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the total time of delivery."
              },
              {
                "name": "customer_email",
                "type": "VARCHAR",
                "tags": [],
                "description": "The email address of the customer."
              },
              {
                "name": "restaurant_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the restaurant related to the order."
              },
              {
                "name": "driver_id",
                "type": "INTEGER",
                "tags": [],
                "description": "The ID of the driver related to the order."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      },
      {
        "namespace": "food_delivery",
        "name": "public.discounts",
        "facets": {
          "columnLineage": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json",
            "fields": {
              "amount_off": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_placed_on"
                  },
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "order_delivered_on"
                  }
                ]
              },
              "customer_email": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.delivery_7_days",
                    "field": "customer_email"
                  }
                ]
              }
            }
          },
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for discounts."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "id",
                "type": "INTEGER",
                "tags": [],
                "description": "The unique ID of the discount."
              },
              {
                "name": "amount_off",
                "type": "INTEGER",
                "tags": [],
                "description": "The amount of the discount."
              },
              {
                "name": "customer_email",
                "type": "VARCHAR",
                "tags": [],
                "description": "The email address of the customer."
              },
              {
                "name": "starts_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the discount starts."
              },
              {
                "name": "ends_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the discount ends."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:58:02.000Z",
    "run": {
      "runId": "bd41a42a-bf18-4b74-9bb7-cd62637823d8"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "delivery_times_7_days"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "adc8507c-595e-4d76-9dac-be2bf0ffe1ee",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "orders_popular_day_of_week",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "INSERT INTO popular_orders_day_of_week (order_day_of_week, order_placed_on, orders_placed)\n  SELECT EXTRACT(DOW FROM t.order_placed_on) AS order_day_of_week, t.order_placed_on, COUNT(*) AS orders_placed\n    FROM top_delivery_times AS t\n   INNER JOIN customers AS c\n      ON d.customer_email = c.email\n   GROUP BY t.order_day_of_week\n   ORDER BY t.orders_placed DESC\n   LIMIT 1;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Determines the popular day of week orders are placed."
        }
      }
    },
    "inputs": [
      {
        "namespace": "food_delivery",
        "name": "public.top_delivery_times"
      },
      {
        "namespace": "food_delivery",
        "name": "public.customers"
      }
    ],
    "outputs": [
      {
        "namespace": "food_delivery",
        "name": "public.popular_orders_day_of_week",
        "facets": {
          "columnLineage": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json",
            "fields": {
              "order_day_of_week": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.top_delivery_times",
                    "field": "order_placed_on"
                  }
                ]
              },
              "order_placed_on": {
                "inputFields": [
                  {
                    "namespace": "food_delivery",
                    "name": "public.top_delivery_times",
                    "field": "order_placed_on"
                  }
                ]
              }
            }
          },
          "documentation": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationDatasetFacet.json",
            "description": "A table for popular orders by day of week."
          },
          "schema": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json",
            "fields": [
              {
                "name": "order_day_of_week",
                "type": "INTEGER",
                "tags": [],
                "description": "The day of week of the order."
              },
              {
                "name": "order_placed_on",
                "type": "TIMESTAMP",
                "tags": [],
                "description": "An ISO-8601 timestamp representing the date/time the order was placed."
              },
              {
                "name": "orders_placed",
                "type": "INTEGER",
                "tags": [],
                "description": "The number of orders placed on day of week."
              }
            ]
          },
          "dataSource": {
            "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
            "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DatasourceDatasetFacet.json",
            "name": "food_delivery_db",
            "uri": "postgres://food_delivery:food_delivery@postgres:5432/food_delivery"
          }
        }
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:46:12.000Z",
    "run": {
      "runId": "adc8507c-595e-4d76-9dac-be2bf0ffe1ee"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "orders_popular_day_of_week"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "START",
    "eventTime": "2020-02-22T22:42:42.000Z",
    "run": {
      "runId": "3ab25429-cf9c-4d1d-9166-1e1946f9d3c3",
      "facets": {
        "nominalTime": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json",
          "nominalStartTime": "2020-02-22T22:00:00.000Z",
          "nominalEndTime": "2020-02-22T22:00:00.000Z"
        }
      }
    },
    "job": {
      "namespace": "food_delivery",
      "name": "email_discounts",
      "facets": {
        "sql": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json",
          "query": "SELECT d.id, d.amount_off, d.customer_email, d.starts_on, d.ends_on\n  FROM discounts AS d\n INNER JOIN customers AS c\n    ON d.customer_email = c.email;"
        },
        "documentation": {
          "_producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json",
          "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/DocumentationJobFacet.json",
          "description": "Email discounts to customers that have experienced order delays."
        }
      }
    },
    "inputs": [
      {
        "namespace": "food_delivery",
        "name": "public.discounts"
      },
      {
        "namespace": "food_delivery",
        "name": "public.customers"
      }
    ],
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  },
  {
    "eventType": "COMPLETE",
    "eventTime": "2020-02-22T22:56:01.000Z",
    "run": {
      "runId": "3ab25429-cf9c-4d1d-9166-1e1946f9d3c3"
    },
    "job": {
      "namespace": "food_delivery",
      "name": "email_discounts"
    },
    "producer": "https://github.com/MarquezProject/marquez/blob/main/docker/metadata.json"
  }
]
