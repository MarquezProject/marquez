"use strict";(self.webpackChunkmarquez_website_docs=self.webpackChunkmarquez_website_docs||[]).push([[998],{14064:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var n=t(87462),i=(t(67294),t(3905));const r={title:"Quickstart",template:"basepage",sidebar_position:1},o=void 0,l={unversionedId:"quickstart/index",id:"quickstart/index",title:"Quickstart",description:"Table of Contents",source:"@site/docs/quickstart/index.mdx",sourceDirName:"quickstart",slug:"/quickstart/",permalink:"/docs/quickstart/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/quickstart/index.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Quickstart",template:"basepage",sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Metadata API",permalink:"/docs/category/metadata-api"}},s={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Get Marquez",id:"get-marquez",level:2},{value:"Marquez Data Model",id:"marquez-data-model",level:2},{value:"Metadata Storage",id:"metadata-storage",level:3},{value:"Metadata Versioning",id:"metadata-versioning",level:3},{value:"Write Metadata to Marquez",id:"write-metadata-to-marquez",level:2},{value:"Explore Metadata in Marquez",id:"explore-metadata-in-marquez",level:2},{value:"Search Job Metadata",id:"search-job-metadata",level:3},{value:"View Job Metadata",id:"view-job-metadata",level:3},{value:"View Dataset Metadata",id:"view-dataset-metadata",level:3},{value:"Collecting Live Metadata",id:"collecting-live-metadata",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Feedback",id:"feedback",level:2}],p={toc:d},m="wrapper";function u(e){let{components:a,...r}=e;return(0,i.kt)(m,(0,n.Z)({},p,r,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#marquez-data-model"},"Marquez Data Model")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#write-metadata-to-marquez"},"Write Metadata to Marquez")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#explore-metadata-in-marquez"},"Export Metadata in Marquez")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#collecting-live-metadata"},"Collecting Live Metadata")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#summary"},"Summary")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#next-steps"},"Next Steps")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#feedback"},"Feedback"))),(0,i.kt)("p",null,"This guide covers how you can quickly get started collecting ",(0,i.kt)("em",{parentName:"p"},"dataset"),", ",(0,i.kt)("em",{parentName:"p"},"job"),", and ",(0,i.kt)("em",{parentName:"p"},"run")," metadata using Marquez. We'll first introduce you to Marquez\u2019s data model, show how to write sample lineage metadata to a running Marquez instance, then explore the sample lineage metadata via the web UI."),(0,i.kt)("h1",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"Before you begin, make sure you have installed:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/install"},"Docker 17.05"),"+"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install"},"Docker Compose"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note: In this guide, we'll be running the Marquez HTTP server via Docker.")),(0,i.kt)("h2",{id:"get-marquez"},"Get Marquez"),(0,i.kt)("p",null,"To checkout the Marquez source code, run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ git clone https://github.com/MarquezProject/marquez && cd marquez\n")),(0,i.kt)("h2",{id:"marquez-data-model"},"Marquez Data Model"),(0,i.kt)("h3",{id:"metadata-storage"},"Metadata Storage"),(0,i.kt)("p",null,"Marquez's ",(0,i.kt)("em",{parentName:"p"},"centralized")," data model provides a normalized representation of the end-to-end metadata of your pipelines (composed of multiple jobs) with built-in metadata versioning support. The data model also enables highly flexible data lineage queries across all datasets, while reliably and efficiently associating (",(0,i.kt)("em",{parentName:"p"},"upstream"),", ",(0,i.kt)("em",{parentName:"p"},"downstream"),") dependencies between jobs and the datasets they produce and consume. We encourage you to familiarize yourself with the data model below:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(11389).Z,width:"960",height:"486"})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Figure 1:")," Marquez's metadata storage model.")),(0,i.kt)("p",null,"The above data model generalizes very well when you start collecting basic metadata from multiple sources, schedulers and/or data processing frameworks. With metadata changes tracked, you can easily, for example, query the history of schema changes for a given dataset and compare a ",(0,i.kt)("em",{parentName:"p"},"previous")," schema version with the ",(0,i.kt)("em",{parentName:"p"},"latest")," schema version. Note this is especially useful for auditing or troubleshooting impacted jobs downstream of a schema change."),(0,i.kt)("h3",{id:"metadata-versioning"},"Metadata Versioning"),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(6087).Z,width:"603",height:"237"})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Figure 2:")," Marquez's metadata versioning model.")),(0,i.kt)("p",null,"Run-level metadata is tracked via HTTP API calls to ",(0,i.kt)("inlineCode",{parentName:"p"},"/lineage")," using ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage"},"OpenLineage"),". A ",(0,i.kt)("strong",{parentName:"p"},"run")," has a unique ID and records it's code version, inputs and outputs, run args, and run state transitions. When a run transitions to a ",(0,i.kt)("strong",{parentName:"p"},"complete")," state, the output datasets for the run are created if not already registered with Marquez. A ",(0,i.kt)("strong",{parentName:"p"},"dataset")," ",(0,i.kt)("em",{parentName:"p"},"version")," pointer is present for each input and output dataset and maintained by Marquez keeping track of the historical set of metadata changes. Each ",(0,i.kt)("em",{parentName:"p"},"immutable")," dataset version is mapped to a metadata change and the run ID that modifyed the dataset preserving it's state at some given point in time. A ",(0,i.kt)("strong",{parentName:"p"},"job")," ",(0,i.kt)("em",{parentName:"p"},"version")," pointer is also present and mapped to a unique referenceable link to code, the ",(0,i.kt)("em",{parentName:"p"},"latest")," run ID, and one or more versioned input and output datasets."),(0,i.kt)("h2",{id:"write-metadata-to-marquez"},"Write Metadata to Marquez"),(0,i.kt)("p",null,"In this example, we'll be using sample dataset, job, and run metadata for a hypothetical ",(0,i.kt)("em",{parentName:"p"},"Food Delivery")," website. The sample metadata consists of hourly and daily ETL jobs that query tables in a ",(0,i.kt)("inlineCode",{parentName:"p"},"postgres")," database used for reporting and analytics. So, let's get started!"),(0,i.kt)("p",null,"To start Marquez with sample metadata that will be used and referenced in later sections, run the following script from the base of the Marquez repository (the ",(0,i.kt)("inlineCode",{parentName:"p"},"--seed")," flag will execute the ",(0,i.kt)("inlineCode",{parentName:"p"},"marquez seed")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/MarquezProject/marquez/blob/main/api/src/main/java/marquez/cli/SeedCommand.java"},"command"),"):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ ./docker/up.sh --seed\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Tip:")," Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"--build")," flag to build images from source, or ",(0,i.kt)("inlineCode",{parentName:"p"},"--tag X.Y.Z")," to use a tagged image.")),(0,i.kt)("p",null,"To view the Marquez UI and verify it's running, open ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:3000"},"http://localhost:3000"),". The UI enables you to discover dependencies between jobs and the datasets they produce and consume via the lineage graph, view run-level metadata of current and previous job runs, and much more!"),(0,i.kt)("h2",{id:"explore-metadata-in-marquez"},"Explore Metadata in Marquez"),(0,i.kt)("h3",{id:"search-job-metadata"},"Search Job Metadata"),(0,i.kt)("p",null,"To view lineage metadata collected by Marquez, browse to the UI by visiting ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:3000"},"http://localhost:3000"),". Then, use the search bar in the upper right-side of the page and search for the job ",(0,i.kt)("inlineCode",{parentName:"p"},"etl_delivery_7_days"),". To view lineage metadata for ",(0,i.kt)("inlineCode",{parentName:"p"},"etl_delivery_7_days"),", click on the job from the drop-down list:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(71875).Z,width:"2720",height:"1886"})),(0,i.kt)("h3",{id:"view-job-metadata"},"View Job Metadata"),(0,i.kt)("p",null,"You should see the job ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", the query, and a tab containing its run history: "),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(83454).Z,width:"2720",height:"1886"})),(0,i.kt)("h3",{id:"view-dataset-metadata"},"View Dataset Metadata"),(0,i.kt)("p",null,"Finally, click on the output dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"public.delivery_7_days")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"etl_delivery_7_days"),". You should see the dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"schema"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"description"),":"),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(35326).Z,width:"2720",height:"1886"})),(0,i.kt)("h2",{id:"collecting-live-metadata"},"Collecting Live Metadata"),(0,i.kt)("p",null,"To collect ",(0,i.kt)("em",{parentName:"p"},"run-level")," metadata as ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage"},"OpenLineage")," events using Marquez as the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage#scope"},"HTTP backend"),", see the OpenLineage ",(0,i.kt)("a",{parentName:"p",href:"https://openlineage.io/getting-started"},"getting started")," guide!"),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"In this simple example, we showed you how to write sample lineage metadata to a running Marquez instance, then explored the sample lineage metadata for the job ",(0,i.kt)("inlineCode",{parentName:"p"},"etl_delivery_7_days")," via the web UI."),(0,i.kt)("h2",{id:"next-steps"},"Next Steps"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Take a look at our Airflow ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/MarquezProject/marquez/tree/main/examples/airflow"},"example")," to learn how to enable metadata collection for Airflow DAGs and troubleshoot failing DAGs using Marquez."),(0,i.kt)("li",{parentName:"ul"},"Listen to ",(0,i.kt)("a",{parentName:"li",href:"https://www.dataengineeringpodcast.com/marquez-data-lineage-episode-111"},"Solving Data Lineage Tracking And Data Discovery At WeWork"),"."),(0,i.kt)("li",{parentName:"ul"},"Listen to ",(0,i.kt)("a",{parentName:"li",href:"https://www.dataengineeringpodcast.com/openlineage-data-lineage-specification-episode-187"},"Unlocking The Power of Data Lineage In Your Platform with OpenLineage"),"."),(0,i.kt)("li",{parentName:"ul"},"Watch ",(0,i.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=dRaRKob-lRQ"},"A Metadata Service for Data Abstraction, Data Lineage & Event-based Triggers"),".")),(0,i.kt)("h2",{id:"feedback"},"Feedback"),(0,i.kt)("p",null,"What did you think of this guide? You can reach out to us on ",(0,i.kt)("a",{parentName:"p",href:"http://bit.ly/MarquezSlack"},"slack")," and leave us feedback, or ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/MarquezProject/marquez/blob/main/CONTRIBUTING.md#submitting-a-pull-request"},"open a pull request")," with your suggestions!"))}u.isMDXComponent=!0},11389:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/metadata-model-4accdff929beb75e2db4503c87166db1.svg"},6087:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/metadata-versioning-46fc3b5715c267600742ee63eb8a5076.svg"},71875:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/search-view-job-9385d1d46e5ee7eed826f56657d8a329.png"},35326:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/tab-view-dataset-metadata-415b526856744f79b87d1c837307b725.png"},83454:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/tab-view-job-metadata-882791dac1f1b8491a748e94664669ec.png"}}]);